import{a as C,r as c,A as v,b as w,j as e,Q as d,B as G,a2 as k}from"./index-007Z5DPj.js";const S=()=>{const p=C(),{user:F,token:h}=c.useContext(v),[m,b]=c.useState(!1),[r,f]=c.useState({title:"",city:"",desc:"",address:"",price:0,maxGroupSize:1,photo:"",distance:0,featured:!1}),{errors:t,touched:s,validateField:y,validateAll:g,touchField:u}=w(k),o=i=>{const{name:n,value:l,type:a,checked:N}=i.target,x=a==="checkbox"?N:a==="number"?Number(l):l;f({...r,[n]:x}),u(n),y(n,x)},j=async i=>{i.preventDefault();const n=g(r);if(!n.isValid){Object.keys(r).forEach(a=>u(a));const l=Object.values(n.errors)[0];d.error(l);return}b(!0);try{const l=await fetch(`${G}/tours`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(r)}),{message:a}=await l.json();l.ok?(d.success(a),p("/all-tours")):d.error(a)}catch{d.error("Server not responding")}};return e.jsx("div",{className:"min-h-screen md:min-h-[400px] flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"bg-white mx-6 p-6 md:p-8 rounded-lg text-center shadow-md w-full max-w-xl m-8 md:max-w-[80%] ",children:e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:"Create Tour"}),e.jsx("p",{className:"text-sm md:text-base text-GrayColor",children:"Create a new tour by filling the all fields."})]}),e.jsxs("form",{onSubmit:j,className:"space-y-2 md:space-y-3",children:[e.jsxs("div",{className:"md:grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:["                ",e.jsxs("label",{htmlFor:"title",className:"block text-md md:text-lg font-medium text-GrayColor",children:["Title ",s.title&&t.title&&e.jsxs("span",{className:"text-red-500 text-sm ml-2",children:["* ",t.title]})]}),e.jsx("input",{id:"title",type:"text",name:"title",placeholder:"Enter Tour Name",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s.title&&t.title?"border-red-500 bg-red-50":s.title&&!t.title?"border-green-500 bg-green-50":"border-gray-300 focus:border-GreenColor"}`,value:r.title,onChange:o,required:!0})]}),e.jsxs("div",{children:["                ",e.jsxs("label",{htmlFor:"city",className:"block text-md md:text-lg font-medium text-GrayColor",children:["City ",s.city&&t.city&&e.jsxs("span",{className:"text-red-500 text-sm ml-2",children:["* ",t.city]})]}),e.jsx("input",{id:"city",type:"text",name:"city",placeholder:"Enter City Name",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s.city&&t.city?"border-red-500 bg-red-50":s.city&&!t.city?"border-green-500 bg-green-50":"border-gray-300 focus:border-GreenColor"}`,value:r.city,onChange:o,required:!0})]})]}),e.jsxs("div",{className:"md:grid grid-cols-3 gap-8",children:[e.jsxs("div",{children:["                ",e.jsxs("label",{htmlFor:"price",className:"block text-md md:text-lg font-medium text-GrayColor",children:["Price (₹) ",s.price&&t.price&&e.jsxs("span",{className:"text-red-500 text-sm ml-2",children:["* ",t.price]})]}),e.jsx("input",{id:"price",type:"number",name:"price",placeholder:"Enter Price in ₹",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s.price&&t.price?"border-red-500 bg-red-50":s.price&&!t.price?"border-green-500 bg-green-50":"border-gray-300 focus:border-GreenColor"}`,value:r.price,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"block text-md md:text-lg font-medium text-GrayColor",children:"Max Peoples"}),e.jsx("input",{type:"number",name:"maxGroupSize",placeholder:"Enter Max Peoples per Trip Tour",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-GreenColor",value:r.maxGroupSize,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"block text-md md:text-lg font-medium text-GrayColor",children:"Distance"}),e.jsx("input",{type:"number",name:"distance",placeholder:"Enter Total Distance",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-GreenColor",value:r.distance,onChange:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"block text-md md:text-lg font-medium text-GrayColor",children:"Address"}),e.jsx("input",{type:"text",name:"address",placeholder:"Enter Destination Address",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-GreenColor",value:r.address,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"block text-md md:text-lg font-medium text-GrayColor",children:"Description"}),e.jsx("input",{type:"text",name:"desc",placeholder:"Enter Description",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-GreenColor",value:r.desc,onChange:o})]}),e.jsxs("div",{children:["              ",e.jsxs("label",{htmlFor:"photo",className:"block text-md md:text-lg font-medium text-GrayColor",children:["Photo URL ",s.photo&&t.photo&&e.jsxs("span",{className:"text-red-500 text-sm ml-2",children:["* ",t.photo]})]}),e.jsx("input",{id:"photo",type:"text",name:"photo",placeholder:"Enter Picture URL",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s.photo&&t.photo?"border-red-500 bg-red-50":s.photo&&!t.photo?"border-green-500 bg-green-50":"border-gray-300 focus:border-GreenColor"}`,value:r.photo,onChange:o,required:!0})]}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("label",{htmlFor:"",className:"text-TextColor text-[15px] font-semibold leading-7 px-4",children:["Featured",e.jsxs("select",{name:"featured",value:r.featured,onChange:o,className:"text-TextColor text-[15px] leading-7 px-4 py-3 focus:outline-none",children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]})}),"            ",e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full Greenbtn my-3 flex items-center justify-center",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Tour"})})]})]})})})};export{S as default};
