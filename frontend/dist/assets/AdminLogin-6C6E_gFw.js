import{r as m,j as a,A as k,a as B,L as D,B as U}from"./index-007Z5DPj.js";import{c as g}from"./index-BQquCaqX.js";import{_ as K,u as y,d as F,a as H,b as I,F as b,c as G,C as T,e as q,f as W,g as z,h as j,i as C,B as J}from"./Form-BX6y7dZn.js";function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},x.apply(null,arguments)}function N(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function M(e){var t=V(e,"string");return typeof t=="symbol"?t:String(t)}function V(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Q(e,t,n){var s=m.useRef(e!==void 0),r=m.useState(t),o=r[0],d=r[1],u=e!==void 0,p=s.current;return s.current=u,!u&&p&&o!==t&&d(t),[u?e:o,m.useCallback(function(f){for(var l=arguments.length,i=new Array(l>1?l-1:0),c=1;c<l;c++)i[c-1]=arguments[c];n&&n.apply(void 0,[f].concat(i)),d(f)},[n])]}function X(e,t){return Object.keys(t).reduce(function(n,s){var r,o=n,d=o[N(s)],u=o[s],p=K(o,[N(s),s].map(M)),f=t[s],l=Q(u,d,e[f]),i=l[0],c=l[1];return x({},p,(r={},r[s]=i,r[f]=c,r))},e)}const A=F("h4");A.displayName="DivStyledAsH4";const L=m.forwardRef(({className:e,bsPrefix:t,as:n=A,...s},r)=>(t=y(t,"alert-heading"),a.jsx(n,{ref:r,className:g(e,t),...s})));L.displayName="AlertHeading";const Y=["onKeyDown"];function Z(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ee(e){return!e||e.trim()==="#"}const S=m.forwardRef((e,t)=>{let{onKeyDown:n}=e,s=Z(e,Y);const[r]=H(Object.assign({tagName:"a"},s)),o=I(d=>{r.onKeyDown(d),n==null||n(d)});return ee(s.href)||s.role==="button"?a.jsx("a",Object.assign({ref:t},s,r,{onKeyDown:o})):a.jsx("a",Object.assign({ref:t},s,{onKeyDown:n}))});S.displayName="Anchor";const O=m.forwardRef(({className:e,bsPrefix:t,as:n=S,...s},r)=>(t=y(t,"alert-link"),a.jsx(n,{ref:r,className:g(e,t),...s})));O.displayName="AlertLink";const _=m.forwardRef((e,t)=>{const{bsPrefix:n,show:s=!0,closeLabel:r="Close alert",closeVariant:o,className:d,children:u,variant:p="primary",onClose:f,dismissible:l,transition:i=b,...c}=X(e,{show:"onClose"}),h=y(n,"alert"),E=G(R=>{f&&f(!1,R)}),v=i===!0?b:i,w=a.jsxs("div",{role:"alert",...v?void 0:c,ref:t,className:g(d,h,p&&`${h}-${p}`,l&&`${h}-dismissible`),children:[l&&a.jsx(T,{onClick:E,"aria-label":r,variant:o}),u]});return v?a.jsx(v,{unmountOnExit:!0,...c,ref:void 0,in:s,children:w}):s?w:null});_.displayName="Alert";const se=Object.assign(_,{Link:O,Heading:L}),P=m.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:s,...r},o)=>{const d=y(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return a.jsx(n,{ref:o,...r,className:g(s,t?`${d}${u}`:d)})});P.displayName="Container";const $=m.forwardRef(({bsPrefix:e,className:t,as:n="div",...s},r)=>{const o=y(e,"row"),d=q(),u=W(),p=`${o}-cols`,f=[];return d.forEach(l=>{const i=s[l];delete s[l];let c;i!=null&&typeof i=="object"?{cols:c}=i:c=i;const h=l!==u?`-${l}`:"";c!=null&&f.push(`${p}${h}-${c}`)}),a.jsx(n,{ref:r,...s,className:g(t,o,...f)})});$.displayName="Row";const re=()=>{const[e,t]=m.useState({email:"",password:""}),[n,s]=m.useState(null),[r,o]=m.useState(!1),{dispatch:d}=m.useContext(k),u=B(),p=l=>{t(i=>({...i,[l.target.id]:l.target.value})),s(null)},f=async l=>{if(l.preventDefault(),o(!0),s(null),!e.email||!e.password){s("Email and password are required."),o(!1);return}try{const i=await fetch(`${U}/auth/login`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}),c=await i.json();if(!i.ok){s(c.message||"Login failed. Please check your credentials."),o(!1);return}if(c.data.role!=="admin"){s("Access denied. Only admins can log in here."),d({type:"LOGIN_FAILURE",payload:{message:"Access denied. Only admins can log in here."}}),o(!1);return}d({type:"LOGIN_SUCCESS",payload:c.data,token:c.token}),o(!1),u("/admin/dashboard")}catch(i){s(i.message||"Something went wrong. Please try again."),d({type:"LOGIN_FAILURE",payload:{message:i.message||"Something went wrong."}}),o(!1)}};return a.jsx("section",{children:a.jsx(P,{children:a.jsx($,{children:a.jsx(z,{lg:"8",className:"m-auto",children:a.jsx("div",{className:"login__container d-flex justify-content-center",children:a.jsxs("div",{className:"login__form",children:[a.jsx("h2",{children:"Admin Login"}),a.jsxs(j,{onSubmit:f,children:[a.jsx(C,{children:a.jsx(j.Control,{type:"email",placeholder:"Email",required:!0,id:"email",onChange:p,value:e.email})}),a.jsx(C,{className:"mt-3",children:a.jsx(j.Control,{type:"password",placeholder:"Password",required:!0,id:"password",onChange:p,value:e.password})}),n&&a.jsx(se,{variant:"danger",className:"mt-3",children:n}),a.jsx(J,{className:"btn secondary__btn auth__btn mt-4",type:"submit",disabled:r,children:r?"Logging In...":"Login"})]}),a.jsxs("p",{className:"mt-3",children:["Not an admin? ",a.jsx(D,{to:"/login",children:"User Login"})]})]})})})})})})};export{re as default};
