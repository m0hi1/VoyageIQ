import{r as a,j as s,q as st,Q as L,B as ce,g as rt}from"./index-007Z5DPj.js";import{c as k}from"./index-BQquCaqX.js";import{j as Q,o as be,s as J,b as B,k as ve,l as Se,m as ot,u as D,c as Ee,C as at,d as it,n as lt,p as ct,r as Me,F as We,q as dt,t as ut,h as w,B as Oe}from"./Form-BX6y7dZn.js";function ft(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function ht(e,t){e.classList?e.classList.add(t):ft(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Ae(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function mt(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Ae(e.className,t):e.setAttribute("class",Ae(e.className&&e.className.baseVal||"",t))}function pt(){const e=a.useRef(!0),t=a.useRef(()=>e.current);return a.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function gt(e){const t=a.useRef(null);return a.useEffect(()=>{t.current=e}),t.current}const xt=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",yt=typeof document<"u",Le=yt||xt?a.useLayoutEffect:a.useEffect;function wt(e){const t=a.useRef(e);return t.current=e,t}function Et(e){const t=wt(e);a.useEffect(()=>()=>t.current(),[])}var bt=Function.prototype.bind.call(Function.prototype.call,[].slice);function H(e,t){return bt(e.querySelectorAll(t))}function Be(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const vt="data-rr-ui-";function jt(e){return`${vt}${e}`}const _e=a.createContext(Q?window:void 0);_e.Provider;function je(){return a.useContext(_e)}const De=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Rt(e,t){const n=De(e),r=De(t);return o=>{n&&n(o),r&&r(o)}}function Re(e,t){return a.useMemo(()=>Rt(e,t),[e,t])}var le;function Fe(e){if((!le&&le!==0||e)&&Q){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),le=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return le}function Nt(){return a.useState(null)}function ge(e){e===void 0&&(e=be());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Ct(e){const t=a.useRef(e);return t.current=e,t}function Tt(e){const t=Ct(e);a.useEffect(()=>()=>t.current(),[])}function kt(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const $e=jt("modal-open");class Ne{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return kt(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();t.style={overflow:o.style.overflow,[r]:o.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(J(o,r)||"0",10)+t.scrollBarWidth}px`),o.setAttribute($e,""),J(o,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute($e),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const xe=(e,t)=>Q?e==null?(t||be()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function St(e,t){const n=je(),[r,o]=a.useState(()=>xe(e,n==null?void 0:n.document));if(!r){const i=xe(e);i&&o(i)}return a.useEffect(()=>{},[t,r]),a.useEffect(()=>{const i=xe(e);i!==r&&o(i)},[e,r]),r}function Mt({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:o}){const i=a.useRef(null),f=a.useRef(t),l=B(n);a.useEffect(()=>{t?f.current=!0:l(i.current)},[t,l]);const d=Re(i,ve(e)),u=a.cloneElement(e,{ref:d});return t?u:o||!f.current&&r?null:u}const Ot=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function At(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Lt(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:o,onExiting:i,onExited:f,addEndListener:l,children:d}=e,u=At(e,Ot);const g=a.useRef(null),x=Re(g,ve(d)),p=R=>O=>{R&&g.current&&R(g.current,O)},b=a.useCallback(p(t),[t]),C=a.useCallback(p(n),[n]),v=a.useCallback(p(r),[r]),E=a.useCallback(p(o),[o]),h=a.useCallback(p(i),[i]),j=a.useCallback(p(f),[f]),T=a.useCallback(p(l),[l]);return Object.assign({},u,{nodeRef:g},t&&{onEnter:b},n&&{onEntering:C},r&&{onEntered:v},o&&{onExit:E},i&&{onExiting:h},f&&{onExited:j},l&&{addEndListener:T},{children:typeof d=="function"?(R,O)=>d(R,Object.assign({},O,{ref:x})):a.cloneElement(d,{ref:x})})}const Bt=["component"];function Dt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Ft=a.forwardRef((e,t)=>{let{component:n}=e,r=Dt(e,Bt);const o=Lt(r);return s.jsx(n,Object.assign({ref:t},o))});function $t({in:e,onTransition:t}){const n=a.useRef(null),r=a.useRef(!0),o=B(t);return Le(()=>{if(!n.current)return;let i=!1;return o({in:e,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[e,o]),Le(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function It({children:e,in:t,onExited:n,onEntered:r,transition:o}){const[i,f]=a.useState(!t);t&&i&&f(!1);const l=$t({in:!!t,onTransition:u=>{const g=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(f(!0),n==null||n(u.element)))};Promise.resolve(o(u)).then(g,x=>{throw u.in||f(!0),x})}}),d=Re(l,ve(e));return i&&!t?null:a.cloneElement(e,{ref:d})}function Ie(e,t,n){return e?s.jsx(Ft,Object.assign({},n,{component:e})):t?s.jsx(It,Object.assign({},n,{transition:t})):s.jsx(Mt,Object.assign({},n))}const Ut=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Wt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let ye;function _t(e){return ye||(ye=new Ne({ownerDocument:e==null?void 0:e.document})),ye}function Ht(e){const t=je(),n=e||_t(t),r=a.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:a.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:a.useCallback(o=>{r.current.backdrop=o},[])})}const He=a.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:o,style:i,children:f,backdrop:l=!0,keyboard:d=!0,onBackdropClick:u,onEscapeKeyDown:g,transition:x,runTransition:p,backdropTransition:b,runBackdropTransition:C,autoFocus:v=!0,enforceFocus:E=!0,restoreFocus:h=!0,restoreFocusOptions:j,renderDialog:T,renderBackdrop:R=m=>s.jsx("div",Object.assign({},m)),manager:O,container:de,onShow:Z,onHide:K=()=>{},onExit:ue,onExited:q,onExiting:ee,onEnter:te,onEntering:ne,onEntered:se}=e,fe=Wt(e,Ut);const S=je(),F=St(de),y=Ht(O),he=pt(),re=gt(n),[A,$]=a.useState(!n),N=a.useRef(null);a.useImperativeHandle(t,()=>y,[y]),Q&&!re&&n&&(N.current=ge(S==null?void 0:S.document)),n&&A&&$(!1);const M=B(()=>{if(y.add(),I.current=Se(document,"keydown",pe),V.current=Se(document,"focus",()=>setTimeout(me),!0),Z&&Z(),v){var m,ie;const X=ge((m=(ie=y.dialog)==null?void 0:ie.ownerDocument)!=null?m:S==null?void 0:S.document);y.dialog&&X&&!Be(y.dialog,X)&&(N.current=X,y.dialog.focus())}}),z=B(()=>{if(y.remove(),I.current==null||I.current(),V.current==null||V.current(),h){var m;(m=N.current)==null||m.focus==null||m.focus(j),N.current=null}});a.useEffect(()=>{!n||!F||M()},[n,F,M]),a.useEffect(()=>{A&&z()},[A,z]),Tt(()=>{z()});const me=B(()=>{if(!E||!he()||!y.isTopModal())return;const m=ge(S==null?void 0:S.document);y.dialog&&m&&!Be(y.dialog,m)&&y.dialog.focus()}),oe=B(m=>{m.target===m.currentTarget&&(u==null||u(m),l===!0&&K())}),pe=B(m=>{d&&ot(m)&&y.isTopModal()&&(g==null||g(m),m.defaultPrevented||K())}),V=a.useRef(),I=a.useRef(),ae=(...m)=>{$(!0),q==null||q(...m)};if(!F)return null;const U=Object.assign({role:r,ref:y.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},fe,{style:i,className:o,tabIndex:-1});let P=T?T(U):s.jsx("div",Object.assign({},U,{children:a.cloneElement(f,{role:"document"})}));P=Ie(x,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:ue,onExiting:ee,onExited:ae,onEnter:te,onEntering:ne,onEntered:se,children:P});let W=null;return l&&(W=R({ref:y.setBackdropRef,onClick:oe}),W=Ie(b,C,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:W})),s.jsx(s.Fragment,{children:st.createPortal(s.jsxs(s.Fragment,{children:[W,P]}),F)})});He.displayName="Modal";const Gt=Object.assign(He,{Manager:Ne}),G={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Kt extends Ne{adjustAndStore(t,n,r){const o=n.style[t];n.dataset[t]=o,J(n,{[t]:`${parseFloat(J(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],J(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(ht(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";H(n,G.FIXED_CONTENT).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth)),H(n,G.STICKY_CONTENT).forEach(i=>this.adjustAndStore(o,i,-t.scrollBarWidth)),H(n,G.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();mt(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";H(n,G.FIXED_CONTENT).forEach(i=>this.restore(r,i)),H(n,G.STICKY_CONTENT).forEach(i=>this.restore(o,i)),H(n,G.NAVBAR_TOGGLER).forEach(i=>this.restore(o,i))}}let we;function qt(e){return we||(we=new Kt(e)),we}const Ge=a.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},o)=>(t=D(t,"modal-body"),s.jsx(n,{ref:o,className:k(e,t),...r})));Ge.displayName="ModalBody";const Ke=a.createContext({onHide(){}}),Ce=a.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:o,fullscreen:i,children:f,scrollable:l,...d},u)=>{e=D(e,"modal");const g=`${e}-dialog`,x=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return s.jsx("div",{...d,ref:u,className:k(g,t,o&&`${e}-${o}`,r&&`${g}-centered`,l&&`${g}-scrollable`,i&&x),children:s.jsx("div",{className:k(`${e}-content`,n),children:f})})});Ce.displayName="ModalDialog";const qe=a.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},o)=>(t=D(t,"modal-footer"),s.jsx(n,{ref:o,className:k(e,t),...r})));qe.displayName="ModalFooter";const zt=a.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:o,...i},f)=>{const l=a.useContext(Ke),d=Ee(()=>{l==null||l.onHide(),r==null||r()});return s.jsxs("div",{ref:f,...i,children:[o,n&&s.jsx(at,{"aria-label":e,variant:t,onClick:d})]})}),ze=a.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...o},i)=>(e=D(e,"modal-header"),s.jsx(zt,{ref:i,...o,className:k(t,e),closeLabel:n,closeButton:r})));ze.displayName="ModalHeader";const Vt=it("h4"),Ve=a.forwardRef(({className:e,bsPrefix:t,as:n=Vt,...r},o)=>(t=D(t,"modal-title"),s.jsx(n,{ref:o,className:k(e,t),...r})));Ve.displayName="ModalTitle";function Pt(e){return s.jsx(We,{...e,timeout:null})}function Xt(e){return s.jsx(We,{...e,timeout:null})}const Pe=a.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:o,children:i,dialogAs:f=Ce,"data-bs-theme":l,"aria-labelledby":d,"aria-describedby":u,"aria-label":g,show:x=!1,animation:p=!0,backdrop:b=!0,keyboard:C=!0,onEscapeKeyDown:v,onShow:E,onHide:h,container:j,autoFocus:T=!0,enforceFocus:R=!0,restoreFocus:O=!0,restoreFocusOptions:de,onEntered:Z,onExit:K,onExiting:ue,onEnter:q,onEntering:ee,onExited:te,backdropClassName:ne,manager:se,...fe},S)=>{const[F,y]=a.useState({}),[he,re]=a.useState(!1),A=a.useRef(!1),$=a.useRef(!1),N=a.useRef(null),[M,z]=Nt(),me=lt(S,z),oe=Ee(h),pe=ct();e=D(e,"modal");const V=a.useMemo(()=>({onHide:oe}),[oe]);function I(){return se||qt({isRTL:pe})}function ae(c){if(!Q)return;const _=I().getScrollbarWidth()>0,ke=c.scrollHeight>be(c).documentElement.clientHeight;y({paddingRight:_&&!ke?Fe():void 0,paddingLeft:!_&&ke?Fe():void 0})}const U=Ee(()=>{M&&ae(M.dialog)});Et(()=>{Me(window,"resize",U),N.current==null||N.current()});const P=()=>{A.current=!0},W=c=>{A.current&&M&&c.target===M.dialog&&($.current=!0),A.current=!1},m=()=>{re(!0),N.current=ut(M.dialog,()=>{re(!1)})},ie=c=>{c.target===c.currentTarget&&m()},X=c=>{if(b==="static"){ie(c);return}if($.current||c.target!==c.currentTarget){$.current=!1;return}h==null||h()},Ye=c=>{C?v==null||v(c):(c.preventDefault(),b==="static"&&m())},Je=(c,_)=>{c&&ae(c),q==null||q(c,_)},Qe=c=>{N.current==null||N.current(),K==null||K(c)},Ze=(c,_)=>{ee==null||ee(c,_),dt(window,"resize",U)},et=c=>{c&&(c.style.display=""),te==null||te(c),Me(window,"resize",U)},tt=a.useCallback(c=>s.jsx("div",{...c,className:k(`${e}-backdrop`,ne,!p&&"show")}),[p,ne,e]),Te={...n,...F};Te.display="block";const nt=c=>s.jsx("div",{role:"dialog",...c,style:Te,className:k(t,e,he&&`${e}-static`,!p&&"show"),onClick:b?X:void 0,onMouseUp:W,"data-bs-theme":l,"aria-label":g,"aria-labelledby":d,"aria-describedby":u,children:s.jsx(f,{...fe,onMouseDown:P,className:r,contentClassName:o,children:i})});return s.jsx(Ke.Provider,{value:V,children:s.jsx(Gt,{show:x,ref:me,backdrop:b,container:j,keyboard:!0,autoFocus:T,enforceFocus:R,restoreFocus:O,restoreFocusOptions:de,onEscapeKeyDown:Ye,onShow:E,onHide:h,onEnter:Je,onEntering:Ze,onEntered:Z,onExit:Qe,onExiting:ue,onExited:et,manager:I(),transition:p?Pt:void 0,backdropTransition:p?Xt:void 0,renderBackdrop:tt,renderDialog:nt})})});Pe.displayName="Modal";const Y=Object.assign(Pe,{Body:Ge,Header:ze,Title:Ve,Footer:qe,Dialog:Ce,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Xe=a.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:r,as:o="div",className:i,...f},l)=>{e=D(e,"spinner");const d=`${e}-${n}`;return s.jsx(o,{ref:l,...f,className:k(i,d,r&&`${d}-${r}`,t&&`text-${t}`)})});Xe.displayName="Spinner";const Yt=({isOpen:e,toggle:t,currentUser:n,onSave:r,isEditMode:o})=>{const[i,f]=a.useState({username:"",email:"",password:"",photo:"",role:"user"}),[l,d]=a.useState(!1);a.useEffect(()=>{f(o&&n?{username:n.username||"",email:n.email||"",password:"",photo:n.photo||"",role:n.role||"user"}:{username:"",email:"",password:"",photo:"",role:"user"})},[e,n,o]);const u=x=>{f({...i,[x.target.name]:x.target.value})},g=async x=>{if(x.preventDefault(),d(!0),!i.username||!i.email||!o&&!i.password||!i.role){L.error("Username, email, role, and password (for new users) are required."),d(!1);return}if(!o&&i.password.length<6){L.error("Password must be at least 6 characters long for new users."),d(!1);return}if(o&&i.password&&i.password.length<6){L.error("New password must be at least 6 characters long."),d(!1);return}const p=o?`${ce}/users/${n._id}`:`${ce}/users/admin-create`,b=o?"PUT":"POST",C=localStorage.getItem("token"),v={...i};o&&!v.password&&delete v.password;try{const E=await fetch(p,{method:b,headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify(v)}),h=await E.json();if(d(!1),!E.ok)throw new Error(h.message||`Failed to ${o?"update":"create"} user.`);L.success(`User ${o?"updated":"created"} successfully!`),r(h.data),t()}catch(E){d(!1),L.error(E.message||"An error occurred."),console.error("User form submission error:",E)}};return s.jsxs(Y,{show:e,onHide:t,centered:!0,children:[s.jsx(Y.Header,{closeButton:!0,children:s.jsx(Y.Title,{children:o?"Edit User":"Add New User"})}),s.jsxs(w,{onSubmit:g,children:[s.jsxs(Y.Body,{children:[s.jsxs(w.Group,{className:"mb-3",controlId:"username",children:[s.jsx(w.Label,{children:"Username"}),s.jsx(w.Control,{type:"text",name:"username",value:i.username,onChange:u,required:!0,disabled:l})]}),s.jsxs(w.Group,{className:"mb-3",controlId:"email",children:[s.jsx(w.Label,{children:"Email"}),s.jsx(w.Control,{type:"email",name:"email",value:i.email,onChange:u,required:!0,disabled:l})]}),s.jsxs(w.Group,{className:"mb-3",controlId:"password",children:[s.jsx(w.Label,{children:o?"New Password (optional)":"Password"}),s.jsx(w.Control,{type:"password",name:"password",value:i.password,onChange:u,required:!o,disabled:l,placeholder:o?"Leave blank to keep current password":"Min. 6 characters"})]}),s.jsxs(w.Group,{className:"mb-3",controlId:"photo",children:[s.jsx(w.Label,{children:"Photo URL (optional)"}),s.jsx(w.Control,{type:"text",name:"photo",value:i.photo,onChange:u,disabled:l})]}),s.jsxs(w.Group,{className:"mb-3",controlId:"role",children:[s.jsx(w.Label,{children:"Role"}),s.jsxs(w.Control,{as:"select",name:"role",value:i.role,onChange:u,required:!0,disabled:l,children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"})]})]})]}),s.jsxs(Y.Footer,{children:[s.jsx(Oe,{variant:"secondary",onClick:t,disabled:l,children:"Cancel"}),s.jsx(Oe,{variant:"primary",type:"submit",disabled:l,children:l?s.jsx(Xe,{animation:"border",size:"sm",role:"status","aria-hidden":"true",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}):o?"Save Changes":"Create User"})]})]})]})},Ue=()=>s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-BaseColor"})}),Jt=({message:e})=>s.jsxs("div",{className:"text-center py-10",children:[s.jsx("p",{className:"text-red-600 text-lg",children:"Error fetching users:"}),s.jsx("p",{className:"text-gray-700",children:e||"Could not load user data."})]}),tn=()=>{const{apiData:e,loading:t,error:n,refetch:r}=rt(`${ce}/users`),[o,i]=a.useState([]),[f,l]=a.useState(!1),[d,u]=a.useState(!1),[g,x]=a.useState(null);a.useEffect(()=>{e&&i(e)},[e]);const p=()=>l(!f),b=()=>{u(!1),x(null),p()},C=h=>{u(!0),x(h),p()},v=async()=>{r()},E=async h=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const j=localStorage.getItem("token"),T=await fetch(`${ce}/users/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${j}`}}),R=await T.json();if(!T.ok)throw new Error(R.message||"Failed to delete user.");L.success("User deleted successfully!"),r()}catch(j){L.error(j.message||"Error deleting user."),console.error("Delete user error:",j)}};return t&&!e?s.jsx(Ue,{}):n?s.jsx(Jt,{message:n}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-semibold text-gray-800",children:"Manage Users"}),s.jsx("button",{onClick:b,className:"bg-BaseColor text-white px-6 py-2 rounded-lg hover:bg-BHoverColor transition duration-150 ease-in-out shadow focus:outline-none focus:ring-2 focus:ring-BaseColor focus:ring-opacity-50",children:"Add New User"})]}),t&&s.jsx(Ue,{})," ",!t&&o&&o.length>0?s.jsx("div",{className:"bg-white shadow-xl rounded-lg overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(h=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-xs",title:h._id,children:h._id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.username}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:h.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.role==="admin"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:h.role})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[s.jsx("button",{onClick:()=>C(h),className:"text-indigo-600 hover:text-indigo-900 transition duration-150 ease-in-out",children:"Edit"}),s.jsx("button",{onClick:()=>E(h._id),className:"text-red-600 hover:text-red-900 transition duration-150 ease-in-out",children:"Delete"})]})]},h._id))})]})}):s.jsxs("div",{className:"text-center py-10",children:[s.jsx("p",{className:"text-gray-700 text-lg",children:"No users found."}),s.jsx("p",{className:"text-gray-500",children:"Click “Add New User” to create the first user."})]}),s.jsx(Yt,{isOpen:f,toggle:p,currentUser:g,onSave:v,isEditMode:d})]})};export{tn as default};
