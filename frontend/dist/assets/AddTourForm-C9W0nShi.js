import{a as C,r as c,A as N,j as e,Q as d,B as F}from"./index-007Z5DPj.js";import{C as S,R as u,a as o,F as v,b as t,B as A,S as T}from"./Spinner-DOGx46iQ.js";import"./index-BQquCaqX.js";const z=()=>{const h=C(),{user:j,token:m}=c.useContext(N),[x,n]=c.useState(!1),[r,f]=c.useState({title:"",city:"",address:"",distance:0,photo:"",desc:"",price:0,maxGroupSize:0,featured:!1}),s=l=>{const{id:a,value:i,type:p,checked:y}=l.target;f(g=>({...g,[a]:p==="checkbox"?y:p==="number"?Number(i):i}))},b=async l=>{if(l.preventDefault(),n(!0),!j||!m){d.error("Authentication required. Please log in."),n(!1),h("/login");return}try{const a=await fetch(`${F}/tours`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(r)}),i=await a.json();if(!a.ok)throw new Error(i.message||"Failed to create tour. Please check the details.");n(!1),d.success("Tour added successfully!"),h("/admin/tours")}catch(a){n(!1),d.error(a.message||"An unexpected error occurred."),console.error("Add Tour Error:",a)}};return e.jsx("section",{children:e.jsx(S,{children:e.jsx(u,{children:e.jsxs(o,{lg:"8",className:"m-auto",children:[e.jsx("h3",{className:"mb-4",children:"Add New Tour"}),e.jsxs(v,{onSubmit:b,children:[e.jsxs(t,{children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",id:"title",value:r.title,onChange:s,required:!0})]}),e.jsxs(t,{children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{type:"text",className:"form-control",id:"city",value:r.city,onChange:s,required:!0})]}),e.jsxs(t,{children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",id:"address",value:r.address,onChange:s,required:!0})]}),e.jsxs(u,{children:[e.jsx(o,{md:"6",children:e.jsxs(t,{children:[e.jsx("label",{htmlFor:"distance",children:"Distance (km)"}),e.jsx("input",{type:"number",className:"form-control",id:"distance",value:r.distance,onChange:s,required:!0,min:"0"})]})}),e.jsx(o,{md:"6",children:e.jsxs(t,{children:[e.jsx("label",{htmlFor:"price",children:"Price ($)"}),e.jsx("input",{type:"number",className:"form-control",id:"price",value:r.price,onChange:s,required:!0,min:"0"})]})})]}),e.jsxs(u,{children:[e.jsx(o,{md:"6",children:e.jsxs(t,{children:[e.jsx("label",{htmlFor:"maxGroupSize",children:"Max Group Size"}),e.jsx("input",{type:"number",className:"form-control",id:"maxGroupSize",value:r.maxGroupSize,onChange:s,required:!0,min:"1"})]})}),e.jsx(o,{md:"6",children:e.jsxs(t,{className:"mt-4",children:[e.jsx("label",{htmlFor:"featured",className:"me-3",children:"Featured Tour?"}),e.jsx("input",{type:"checkbox",id:"featured",checked:r.featured,onChange:s})]})})]}),e.jsxs(t,{children:[e.jsx("label",{htmlFor:"photo",children:"Photo URL"}),e.jsx("input",{type:"text",className:"form-control",id:"photo",value:r.photo,onChange:s,required:!0})]}),e.jsxs(t,{children:[e.jsx("label",{htmlFor:"desc",children:"Description"}),e.jsx("textarea",{className:"form-control",id:"desc",rows:"3",value:r.desc,onChange:s,required:!0})]}),e.jsx(A,{color:"primary",type:"submit",disabled:x,className:"mt-3",children:x?e.jsx(T,{size:"sm"}):"Add Tour"})]})]})})})})};export{z as default};
